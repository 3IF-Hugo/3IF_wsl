#include <stdio.h>
#include <sys/wait.h>
#include <unistd.h>
#include <assert.h>

int main(int argc, char** argv)
{
    printf("Bonjour je suis '%s'\n",argv[0]);
    //int pidParent = getpid();
    assert(argc>=3);
    
    for(int i = 2; i < argc; ++i)
    {
        int returnValue = fork();
        if(returnValue == 0)
        {
            execl("./rebours", "./rebours", argv[i], NULL);
        }
    }

    //le wait est executé par le processus parent donc testé si on est chez le parent
    // ici execl donc pas besoin les enfants sont partis
    for(int i = 2; i<argc; ++i)
    {
        wait(NULL);
    }
    
    return 0;
}
